[1,["e6aW2U1KJLsLls3Mrjn4Ma@f9941","13WWq0RzBC56uS7LviyCWK@6c48a","27s54GR6FAOJL6t7V6UbeU@6c48a","3eckI7R99JLqms/wWiatu2@6c48a","51ACADD2dCXYmu42mxiicx@6c48a","79mJZX4+NLpK9oppI2DDbX@6c48a","9esWn/RKJMha4hA0LCO2JA@6c48a","79mJZX4+NLpK9oppI2DDbX@f9941","9esWn/RKJMha4hA0LCO2JA@f9941","13WWq0RzBC56uS7LviyCWK@f9941","af69G9rQRO3JZjueZWkG1Y@f9941","e1nSnavf5FQ5gbFHIZujoR@f9941","3eckI7R99JLqms/wWiatu2@f9941","27s54GR6FAOJL6t7V6UbeU@f9941","51ACADD2dCXYmu42mxiicx@f9941","ednlgR+7dKKI6poTEZjxb/","af69G9rQRO3JZjueZWkG1Y@6c48a","e1nSnavf5FQ5gbFHIZujoR@6c48a","e6aW2U1KJLsLls3Mrjn4Ma@6c48a","bc6cgXJtZMn7AksPKXjAV9"],["node","_spriteFrame","_textureSource","_parent","_cameraComponent","camera","topSprite","scene","_customMaterial","_effectAsset"],["cc.SpriteFrame",["cc.Node",["_name","_layer","_id","_components","_parent","_lpos","_children","_lscale"],0,9,1,5,2,5],["cc.Sprite",["_sizeMode","_type","_isTrimmedMode","node","_spriteFrame","_color"],0,1,6,5],["cc.UITransform",["node","_contentSize"],3,1,5],["252e0ifUM9LMbd+gsKdD0Cr",["outLen","radius","node"],1,1],["cc.SceneAsset",["_name"],2],["cc.Node",["_name","_layer","_parent","_components"],1,1,12],["cc.Node",["_name","_layer","_parent","_components","_lpos"],1,1,2,5],["cc.Canvas",["node","_cameraComponent"],3,1,1],["cc.Widget",["_alignFlags","node"],2,1],["cc.PolygonCollider2D",["node","_points"],3,1,12],["eafa3ai49ZKOZN80PqTXp9O",["node"],3,1],["945f3sjtShMTaibGreXN/d9",["node","moveNode","topSprite","camera"],3,1,1,1,1],["cc.Camera",["_projection","_priority","_orthoHeight","_near","_far","_clearFlags","_visibility","_color"],-4,5],["cc.Scene",["_name","autoReleaseAssets","_children","_globals"],1,2,4],["cc.SceneGlobals",["ambient","shadows","_skybox","fog","octree","skin","lightProbeInfo","postSettings"],3,4,4,4,4,4,4,4,4],["cc.AmbientInfo",["_skyColorHDR","_groundAlbedoHDR"],3,5,5],["cc.ShadowsInfo",["_shadowColor","_size"],3,5,5],["cc.SkyboxInfo",[],3],["cc.FogInfo",[],3],["cc.OctreeInfo",[],3],["cc.SkinInfo",["_enabled"],2],["cc.LightProbeInfo",[],3],["cc.PostSettingsInfo",[],3],["cc.EffectAsset",["_name","shaders","techniques"],0],["cc.Material",["_name","_props","_states","_defines"],-1]],[[3,0,1,1],[3,0,1],[1,0,1,4,3,5,7,3],[4,1,0,2,3],[2,3,4,1],[1,0,1,4,6,3,5,7,3],[1,0,1,3,5,3],[1,0,1,4,3,5,3],[10,0,1,1],[11,0,1],[5,0,2],[1,0,1,2,6,3,5,4],[1,0,1,4,6,3,7,3],[1,0,1,4,6,3,5,3],[1,0,1,4,6,3,3],[1,0,1,4,3,3],[6,0,1,2,3,3],[7,0,1,2,3,4,3],[8,0,1,1],[9,0,1,2],[2,0,3,4,2],[2,1,0,2,3,5,4,4],[2,1,0,3,4,3],[2,0,3,5,2],[12,0,1,2,3,1],[13,0,1,2,3,4,5,6,7,8],[4,0,2,2],[14,0,1,2,3,3],[15,0,1,2,3,4,5,6,7,1],[16,0,1,1],[17,0,1,1],[18,1],[19,1],[20,1],[21,0,2],[22,1],[23,1],[24,0,1,2,4],[25,0,1,2,3,5]],[[[{"name":"ty_zwj_hcz","rect":{"x":0,"y":0,"width":365,"height":428},"offset":{"x":0,"y":0},"originalSize":{"width":365,"height":428},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-182.5,-214,0,182.5,-214,0,-182.5,214,0,182.5,214,0],"indexes":[0,1,2,2,1,3],"uv":[0,428,365,428,0,0,365,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-182.5,"y":-214,"z":0},"maxPos":{"x":182.5,"y":214,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[1]],[[{"name":"ty_kt_sf4","rect":{"x":0,"y":0,"width":361,"height":164},"offset":{"x":0,"y":0},"originalSize":{"width":361,"height":164},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-180.5,-82,0,180.5,-82,0,-180.5,82,0,180.5,82,0],"indexes":[0,1,2,2,1,3],"uv":[0,164,361,164,0,0,361,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-180.5,"y":-82,"z":0},"maxPos":{"x":180.5,"y":82,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[2]],[[{"name":"os_kt_bl","rect":{"x":0,"y":0,"width":272,"height":324},"offset":{"x":0,"y":0},"originalSize":{"width":272,"height":324},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-136,-162,0,136,-162,0,-136,162,0,136,162,0],"indexes":[0,1,2,2,1,3],"uv":[0,324,272,324,0,0,272,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-136,"y":-162,"z":0},"maxPos":{"x":136,"y":162,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[3]],[[{"name":"mm_icon_star","rect":{"x":0,"y":0,"width":88,"height":84},"offset":{"x":0,"y":0},"originalSize":{"width":88,"height":84},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-44,-42,0,44,-42,0,-44,42,0,44,42,0],"indexes":[0,1,2,2,1,3],"uv":[0,84,88,84,0,0,88,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-44,"y":-42,"z":0},"maxPos":{"x":44,"y":42,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[4]],[[{"name":"cj_home_bg_02","rect":{"x":0,"y":0,"width":200,"height":200},"offset":{"x":0,"y":0},"originalSize":{"width":200,"height":200},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-100,-100,0,100,-100,0,-100,100,0,100,100,0],"indexes":[0,1,2,2,1,3],"uv":[0,200,200,200,0,0,200,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-100,"y":-100,"z":0},"maxPos":{"x":100,"y":100,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[5]],[[{"name":"ty_icon_tx","rect":{"x":0,"y":0,"width":130,"height":102},"offset":{"x":0,"y":0},"originalSize":{"width":130,"height":102},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-65,-51,0,65,-51,0,-65,51,0,65,51,0],"indexes":[0,1,2,2,1,3],"uv":[0,102,130,102,0,0,130,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-65,"y":-51,"z":0},"maxPos":{"x":65,"y":51,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[6]],[[[10,"LightScene"],[11,"Canvas",33554432,"beI88Z2HpFELqR4T5EMHpg",[-5,-6,-7,-8,-9,-10],[[0,-1,[5,1280,720]],[18,-3,-2],[19,45,-4]],[1,640,360,0]],[12,"Node-001",33554432,1,[-12,-13,-14,-15,-16],[[1,-11]],[1,0.6,0.6,0.6]],[5,"light3",33554432,2,[-19,-20,-21],[[0,-17,[5,89,80]],[4,-18,4]],[1,21.707,434.385,0],[1,1.6,1.6,1.6]],[13,"nodeMove",33554432,1,[-24],[[0,-22,[5,130,102]],[4,-23,1]],[1,-449.291,132.371,0]],[5,"light2",33554432,2,[-27,-28],[[0,-25,[5,118,115]],[4,-26,3]],[1,520.032,429.592,0],[1,1.2,1.2,1.2]],[5,"fire",33554432,2,[-31,-32],[[0,-29,[5,272,324]],[4,-30,5]],[1,543.145,-53.063,0],[1,1.5,1.5,1.5]],[6,"SpriteSplash",33554432,[[0,-33,[5,310,10]],[20,0,-34,7],[8,-35,[[[0,-155,5],[0,-155,-5],[0,155,-5],[0,155,5]],8,8,8,8]],[9,-36]],[1,-355,-108,0]],[6,"mm_icon_star",33554432,[[0,-37,[5,88,84]],[4,-38,8],[8,-39,[[[0,-5,42],[0,-19,20],[0,-37,18],[0,-44,12],[0,-43,1],[0,-29,-12],[0,-32,-32],[0,-29,-40],[0,-17,-42],[0,-4,-34],[0,3,-34],[0,16,-42],[0,27,-41],[0,31,-35],[0,28,-13],[0,44,5],[0,43,13],[0,39,17],[0,18,20],[0,6,41]],8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8]],[9,-40]],[1,-51.551,-181.785,0]],[7,"Bg",33554432,1,[[0,-41,[5,2000,900]],[21,2,0,false,-42,[4,4286111897],0],[24,-45,4,-44,-43]],[1,0,0,1000]],[14,"Obstacle",33554432,1,[7,8],[[1,-46]]],[25,0,2,606.0706860706861,0,2000,0,1108344832,[4,4278190080]],[15,"Node",33554432,4,[[0,-47,[5,1,1]],[3,120,500,-48]]],[16,"Node",33554432,1,[[[0,-49,[5,2000,900]],-50],4,1]],[7,"wall",33554432,2,[[0,-51,[5,1246.7933333333335,646.9133333333334]],[22,2,0,-52,2]],[1,440.8966666666667,270.3933333333333,0]],[2,"Node",33554432,5,[[1,-53],[3,20,100,-54]],[1,-28,28,0],[1,0.6249999999999999,0.6249999999999999,0.6249999999999999]],[2,"Node-001",33554432,5,[[1,-55],[3,20,100,-56]],[1,28,28,0],[1,0.6249999999999999,0.6249999999999999,0.6249999999999999]],[2,"Node",33554432,3,[[1,-57],[3,10,50,-58]],[1,-22.03,19.122,0],[1,0.6249999999999999,0.6249999999999999,0.6249999999999999]],[2,"Node-001",33554432,3,[[1,-59],[3,10,50,-60]],[1,0.726,13.27,0],[1,0.6249999999999999,0.6249999999999999,0.6249999999999999]],[2,"Node-002",33554432,3,[[1,-61],[3,10,50,-62]],[1,21.206,17.171,0],[1,0.6249999999999999,0.6249999999999999,0.6249999999999999]],[2,"Node",33554432,6,[[1,-63],[3,10,50,-64]],[1,74.211,132.684,0],[1,0.4166666666666667,0.4166666666666667,0.4166666666666667]],[2,"Node-001",33554432,6,[[1,-65],[26,200,-66]],[1,1.394,-69.324,0],[1,0.4166666666666667,0.4166666666666667,0.4166666666666667]],[2,"shafa",33554432,2,[[0,-67,[5,361,164]],[4,-68,6]],[1,-593.69,-306.297,0],[1,1.5,1.5,1.5]],[27,"LightScene",true,[1],[28,[29,[2,0,0,0,0.520833125],[2,0,0,0,0]],[30,[4,4283190348],[0,512,512]],[31],[32],[33],[34,false],[35],[36]]],[17,"Camera",33554432,1,[11],[1,0,0,1000]],[23,0,13,[4,4029689904]]],0,[0,0,1,0,4,11,0,0,1,0,0,1,0,-1,24,0,-2,9,0,-3,2,0,-4,10,0,-5,4,0,-6,13,0,0,2,0,-1,14,0,-2,5,0,-3,3,0,-4,6,0,-5,22,0,0,3,0,0,3,0,-1,17,0,-2,18,0,-3,19,0,0,4,0,0,4,0,-1,12,0,0,5,0,0,5,0,-1,15,0,-2,16,0,0,6,0,0,6,0,-1,20,0,-2,21,0,0,7,0,0,7,0,0,7,0,0,7,0,0,8,0,0,8,0,0,8,0,0,8,0,0,9,0,0,9,0,5,11,0,6,25,0,0,9,0,0,10,0,0,12,0,0,12,0,0,13,0,-2,25,0,0,14,0,0,14,0,0,15,0,0,15,0,0,16,0,0,16,0,0,17,0,0,17,0,0,18,0,0,18,0,0,19,0,0,19,0,0,20,0,0,20,0,0,21,0,0,21,0,0,22,0,0,22,0,7,23,1,3,23,7,3,10,8,3,10,11,0,24,68],[0,0,0,0,0,0,0,0,0,25,25],[1,1,1,1,1,1,1,1,1,8,1],[7,8,9,10,11,12,13,0,14,15,0]],[[{"name":"os_kt_qd","rect":{"x":0,"y":0,"width":118,"height":115},"offset":{"x":0,"y":0},"originalSize":{"width":118,"height":115},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-59,-57.5,0,59,-57.5,0,-59,57.5,0,59,57.5,0],"indexes":[0,1,2,2,1,3],"uv":[0,115,118,115,0,0,118,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-59,"y":-57.5,"z":0},"maxPos":{"x":59,"y":57.5,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[16]],[[[37,"../LightScene/effect/lightScene",[{"hash":1432563261,"name":"../LightScene/effect/lightScene|lightScene-vs:vert|lightScene-fs:frag","blocks":[{"name":"Constant","stageFlags":16,"binding":0,"members":[{"name":"circles","type":16,"count":30},{"name":"obstacles","type":16,"count":85},{"name":"wh_ratio","type":13,"count":1}],"defines":[]}],"samplerTextures":[{"name":"mainTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":1,"defines":[]}],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[],"attributes":[{"name":"a_position","format":32,"location":0,"defines":[]},{"name":"a_texCoord","format":21,"location":1,"defines":[]},{"name":"a_color","format":44,"location":2,"defines":[]}],"fragColors":[{"name":"cc_FragColor","typename":"vec4","type":16,"count":1,"stageFlags":16,"location":0,"defines":[]}],"descriptors":[{"rate":0,"blocks":[],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":1,"blocks":[{"name":"Constant","stageFlags":16,"binding":0,"members":[{"name":"circles","type":16,"count":30},{"name":"obstacles","type":16,"count":85},{"name":"wh_ratio","type":13,"count":1}],"defines":[]}],"samplerTextures":[{"name":"mainTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":1,"defines":[]}],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":2,"blocks":[],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":3,"blocks":[{"name":"CCGlobal","stageFlags":17,"tags":{"builtin":"global"},"members":[{"name":"cc_time","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_screenSize","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_nativeSize","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_probeInfo","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_debug_view_mode","typename":"vec4","type":16,"count":1,"precision":"mediump "}],"defines":[]},{"name":"CCCamera","stageFlags":17,"tags":{"builtin":"global"},"members":[{"name":"cc_matView","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matViewInv","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matProj","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matProjInv","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matViewProj","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matViewProjInv","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_cameraPos","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_surfaceTransform","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_screenScale","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_exposure","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_mainLitDir","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_mainLitColor","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_ambientSky","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_ambientGround","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_fogColor","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_fogBase","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_fogAdd","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_nearFar","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_viewPort","typename":"vec4","type":16,"count":1,"precision":"mediump "}],"defines":[]}],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]}],"glsl3":{"vert":"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n  mediump vec4 cc_probeInfo;\n  mediump vec4 cc_debug_view_mode;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_surfaceTransform;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nin vec3 a_position;\nin vec2 a_texCoord;\nin vec4 a_color;\nout vec4 v_color;\nout vec2 v_uv;\nvec4 vert() {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matViewProj * pos;\n  v_uv = a_texCoord;\n  v_color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vert(); }","frag":"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n  mediump vec4 cc_probeInfo;\n  mediump vec4 cc_debug_view_mode;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_surfaceTransform;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nin vec2 v_uv;\nin vec4 v_color;\nuniform sampler2D mainTexture;\nlayout(std140) uniform Constant {\n  vec4 circles[30];\n  vec4 obstacles[85];\n  float wh_ratio;\n};\nbool lineSegmentIntersectOptimized(vec2 p1, vec2 p2, vec2 p3, vec2 p4) {\n  if (max(p1.x, p2.x) < min(p3.x, p4.x) ||\n      max(p3.x, p4.x) < min(p1.x, p2.x) ||\n      max(p1.y, p2.y) < min(p3.y, p4.y) ||\n      max(p3.y, p4.y) < min(p1.y, p2.y)) {\n      return false;\n  }\n  vec2 a = p2 - p1;\n  vec2 b = p4 - p3;\n  vec2 c = p3 - p1;\n  float denom = a.x * b.y - a.y * b.x;\n  if (abs(denom) < 1e-6) {\n      return false;\n  }\n  float t = (c.x * b.y - c.y * b.x) / denom;\n  float u = (c.x * a.y - c.y * a.x) / denom;\n  return (t >= 0.0 && t <= 1.0 && u >= 0.0 && u <= 1.0);\n}\nvec4 frag() {\n  vec4 col = v_color;\n  for (int c_i = 0; c_i < 30; c_i++) {\n    if (circles[c_i].x <= -1.0) {\n      break;\n    }\n    vec2 v2 = v_uv - circles[c_i].xy;\n    bool isCross = false;\n    #if CALC_OBSTACLE\n      vec2 bPos = vec2(0.0);\n      int nextNum = 0;\n      bool isLast = false;\n      for (int o_i = 0; o_i < 85; o_i++) {\n        if (o_i == nextNum) {\n          if (obstacles[o_i].x <= 0.0) {\n            break;\n          }\n          isLast = obstacles[o_i].y <= 0.0;\n          bPos = obstacles[o_i].zw;\n          nextNum = o_i + int(obstacles[o_i].x) + 1;\n        } else {\n          isCross = lineSegmentIntersectOptimized(v_uv, circles[c_i].xy, obstacles[o_i-1].zw, obstacles[o_i].xy);\n          if (isCross) {break;}\n          if (o_i+1 != nextNum || isLast) {\n            isCross = lineSegmentIntersectOptimized(v_uv, circles[c_i].xy, obstacles[o_i].xy, obstacles[o_i].zw);\n            if (isCross) {break;}\n          }\n          if (o_i+1 == nextNum) {\n            isCross = lineSegmentIntersectOptimized(v_uv, circles[c_i].xy, isLast ? obstacles[o_i].zw : obstacles[o_i].xy, bPos);\n            if (isCross) {break;}\n          }\n        }\n      }\n    #endif\n    if (!isCross) {\n      v2.x *= wh_ratio;\n      float dis = length(v2);\n      if (dis <= circles[c_i].z) {\n        col.a = 0.0;\n        break;\n      } else if (circles[c_i].w > 0.0 && dis <= (circles[c_i].z + circles[c_i].w)) {\n        float t = smoothstep(0.0, 1.0, (dis - circles[c_i].z) / circles[c_i].w);\n        col.a -= (1.0-t);\n      }\n      if (col.a <= 0.0) {\n        col.a = 0.0;\n        break;\n      }\n    }\n  }\n  return col;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},"glsl1":{"vert":"\nprecision highp float;\nuniform highp mat4 cc_matViewProj;\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvec4 vert() {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matViewProj * pos;\n  v_uv = a_texCoord;\n  v_color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vert(); }","frag":"\nprecision highp float;\nvarying vec2 v_uv;\nvarying vec4 v_color;\nuniform sampler2D mainTexture;\n    uniform vec4 circles[30];\n    uniform vec4 obstacles[85];\n    uniform float wh_ratio;\nbool lineSegmentIntersectOptimized(vec2 p1, vec2 p2, vec2 p3, vec2 p4) {\n  if (max(p1.x, p2.x) < min(p3.x, p4.x) ||\n      max(p3.x, p4.x) < min(p1.x, p2.x) ||\n      max(p1.y, p2.y) < min(p3.y, p4.y) ||\n      max(p3.y, p4.y) < min(p1.y, p2.y)) {\n      return false;\n  }\n  vec2 a = p2 - p1;\n  vec2 b = p4 - p3;\n  vec2 c = p3 - p1;\n  float denom = a.x * b.y - a.y * b.x;\n  if (abs(denom) < 1e-6) {\n      return false;\n  }\n  float t = (c.x * b.y - c.y * b.x) / denom;\n  float u = (c.x * a.y - c.y * a.x) / denom;\n  return (t >= 0.0 && t <= 1.0 && u >= 0.0 && u <= 1.0);\n}\nvec4 frag() {\n  vec4 col = v_color;\n  for (int c_i = 0; c_i < 30; c_i++) {\n    if (circles[c_i].x <= -1.0) {\n      break;\n    }\n    vec2 v2 = v_uv - circles[c_i].xy;\n    bool isCross = false;\n    #if CALC_OBSTACLE\n      vec2 bPos = vec2(0.0);\n      int nextNum = 0;\n      bool isLast = false;\n      for (int o_i = 0; o_i < 85; o_i++) {\n        if (o_i == nextNum) {\n          if (obstacles[o_i].x <= 0.0) {\n            break;\n          }\n          isLast = obstacles[o_i].y <= 0.0;\n          bPos = obstacles[o_i].zw;\n          nextNum = o_i + int(obstacles[o_i].x) + 1;\n        } else {\n          isCross = lineSegmentIntersectOptimized(v_uv, circles[c_i].xy, obstacles[o_i-1].zw, obstacles[o_i].xy);\n          if (isCross) {break;}\n          if (o_i+1 != nextNum || isLast) {\n            isCross = lineSegmentIntersectOptimized(v_uv, circles[c_i].xy, obstacles[o_i].xy, obstacles[o_i].zw);\n            if (isCross) {break;}\n          }\n          if (o_i+1 == nextNum) {\n            isCross = lineSegmentIntersectOptimized(v_uv, circles[c_i].xy, isLast ? obstacles[o_i].zw : obstacles[o_i].xy, bPos);\n            if (isCross) {break;}\n          }\n        }\n      }\n    #endif\n    if (!isCross) {\n      v2.x *= wh_ratio;\n      float dis = length(v2);\n      if (dis <= circles[c_i].z) {\n        col.a = 0.0;\n        break;\n      } else if (circles[c_i].w > 0.0 && dis <= (circles[c_i].z + circles[c_i].w)) {\n        float t = smoothstep(0.0, 1.0, (dis - circles[c_i].z) / circles[c_i].w);\n        col.a -= (1.0-t);\n      }\n      if (col.a <= 0.0) {\n        col.a = 0.0;\n        break;\n      }\n    }\n  }\n  return col;\n}\nvoid main() { gl_FragColor = frag(); }"},"builtins":{"globals":{"blocks":[{"name":"CCGlobal","defines":[]},{"name":"CCCamera","defines":[]}],"samplerTextures":[],"buffers":[],"images":[]},"locals":{"blocks":[],"samplerTextures":[],"buffers":[],"images":[]},"statistics":{"CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS":42,"CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS":158}},"defines":[{"name":"CALC_OBSTACLE","type":"boolean"}]}],[{"passes":[{"program":"../LightScene/effect/lightScene|lightScene-vs:vert|lightScene-fs:frag","blendState":{"targets":[{"blend":true,"blendSrc":2,"blendDst":4,"blendDstAlpha":4}]},"rasterizerState":{"cullMode":0},"depthStencilState":{"depthTest":false,"depthWrite":false},"properties":{"wh_ratio":{"type":13,"value":[2.22222]},"circles":{"type":16,"value":[-1,0.5,0.1,0.05]},"obstacles":{"type":16,"value":[0,0,0,0]}}}]}]]],0,0,[],[],[]],[[{"name":"os_zwj_qd","rect":{"x":0,"y":0,"width":89,"height":80},"offset":{"x":0,"y":0},"originalSize":{"width":89,"height":80},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-44.5,-40,0,44.5,-40,0,-44.5,40,0,44.5,40,0],"indexes":[0,1,2,2,1,3],"uv":[0,80,89,80,0,0,89,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-44.5,"y":-40,"z":0},"maxPos":{"x":44.5,"y":40,"z":0}},"packable":true,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[17]],[[{"name":"bgRect","rect":{"x":0,"y":0,"width":30,"height":30},"offset":{"x":0,"y":0},"originalSize":{"width":30,"height":30},"rotated":false,"capInsets":[0,0,0,0],"vertices":{"rawPosition":[-15,-15,0,15,-15,0,-15,15,0,15,15,0],"indexes":[0,1,2,2,1,3],"uv":[0,30,30,30,0,0,30,0],"nuv":[0,0,1,0,0,1,1,1],"minPos":{"x":-15,"y":-15,"z":0},"maxPos":{"x":15,"y":15,"z":0}},"packable":false,"pixelsToUnit":100,"pivot":{"x":0.5,"y":0.5},"meshType":0}],[0],0,[0],[2],[18]],[[[38,"lightScene",[{"circles":[],"obstacles":[]}],[{"rasterizerState":{},"depthStencilState":{},"blendState":{"targets":[{}]}}],[{"CALC_OBSTACLE":true}]]],0,0,[0],[9],[19]]]]
